this.ckan.module("custom-fields",function(e,t){return{options:{fieldSelector:".control-custom"},initialize:function(){if(!e.browser.msie||"7.0"==!e.browser.version){e.proxyAll(this,/_on/);var t=this.options.fieldSelector+":last input:first";this.el.on("change",t,this._onChange),this.el.on("change",":checkbox",this._onRemove),this.$(".checkbox").addClass("btn btn-danger icon-remove")}},newField:function(e){this.el.append(this.cloneField(e))},cloneField:function(t){return this.resetField(e(t).clone())},resetField:function(e){function t(e,t){return(t||"").replace(/\d+/,function(e){return 1+parseInt(e,10)})}var n=e.find(":input");n.val("").attr("id",t).attr("name",t);var i=e.find("label");return i.text(t).attr("for",t),e},disableField:function(e,t){e.toggleClass("disabled",t!==!1),e.find(":input:not(:checkbox)").prop("disabled",t!==!1)},_onChange:function(t){if(""!==t.target.value){var n=e(t.target).parents(".control-custom");this.newField(n)}},_onRemove:function(t){var n=e(t.target).parents(".control-custom");this.disableField(n,t.target.checked)}}});
