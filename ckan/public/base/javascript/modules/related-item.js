this.ckan.module("related-item",function(b,a){return{options:{truncate:55,truncateMore:null,truncateLess:null,truncatePrefix:"",truncateSuffix:"",truncateSelector:".prose",expandedClass:"expanded",hasExpanderClass:"is-expander",i18n:{more:a("show more"),less:a("show less")}},initialize:function(){b.proxyAll(this,/_on/);var c=this.options;this.description=this.$(c.truncateSelector);this.truncated=this.description.truncate({max_length:c.truncate,more:c.truncateMore||this.i18n("more"),less:c.truncateLess||this.i18n("less"),link_prefix:c.truncatePrefix,link_suffix:c.truncateSuffix});this.collapsedHeight=this.el.height();this.truncated.on("expand.truncate",this._onExpand);this.truncated.on("collapse.truncate",this._onCollapse);if($(".truncator-link",this.description).length>0){this.el.addClass(c.hasExpanderClass)}},_onExpand:function(){var c=this.el.height()-this.collapsedHeight;this.el.addClass(this.options.expandedClass);this.el.css("margin-bottom",c*-1)},_onCollapse:function(){this.el.removeClass(this.options.expandedClass);this.el.css("margin-bottom","")}}});