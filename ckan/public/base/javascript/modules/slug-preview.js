this.ckan.module("slug-preview-target",{initialize:function(){var a=this.sandbox;var b=this.options;var c=this.el;a.subscribe("slug-preview-created",function(d){c.after(d)});a.subscribe("slug-preview-modified",function(){c.off(".slug-preview")});c.on("keyup.slug-preview",function(d){a.publish("slug-target-changed",this.value)})}});this.ckan.module("slug-preview-slug",function(b,a){return{options:{prefix:"",placeholder:"<slug>",i18n:{url:a("URL"),edit:a("Edit")}},initialize:function(){var c=this.sandbox;var f=this.options;var h=this.el;var e=c.translate;var d=h.slug();var g=d.parents(".control-group");var i;if(!(g.length)){return}if(!g.hasClass("error")){i=g.slugPreview({prefix:f.prefix,placeholder:f.placeholder,i18n:{URL:this.i18n("url"),Edit:this.i18n("edit")}});d.keypress(function(){if(event.charCode){c.publish("slug-preview-modified",i[0])}});c.publish("slug-preview-created",i[0]);if(b.browser.msie&&b.browser.version=="7.0"){b(".btn").on("click",i,function(){b(".controls").ie7redraw()});i.hide();setTimeout(function(){i.show();b(".controls").ie7redraw()},10)}}c.subscribe("slug-target-changed",function(j){d.val(j).trigger("change")})}}});