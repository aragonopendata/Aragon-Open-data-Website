(function(a){var b={};b.$dialog=null;b.timeout=5000;b.template={html:""};b.setupFullscreenDialog=function(c){var d=b.$dialog;d.empty()};b.showError=function(d){var c='<p class="error">'+a.trim(d.title)+"</strong><br />"+a.trim(d.message)+"</p>";b.$dialog.html(c)};b.showData=function(g){b.setupFullscreenDialog();if(g.error){return b.showError(g.error)}var f=b.convertData(g);var e=f.columns;var g=f.data;var d=a(b.template.html).appendTo(b.$dialog);var c=a(window).height();a(".dataexplorer-tableview-grid").height(c);a(".dataexplorer-tableview-graph").height(c);var h=new b.createTableView(d,e,g);h.editor.loading();h.editor.loading(false).disableSave();h.editor.bind("save",function(j){h.editor.saving();h.editor.saving(false)})};b.convertData=function(d){var c={columns:[],data:[]};isNumericRegex=(/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/);if(d.fields){c.columns=a.map(d.fields||[],function(f,e){return{id:"header-"+e,name:f,field:"column-"+e,sortable:true}});c.data=a.map(d.data||[],function(h,k){var e={id:k};for(var f=0,j=h.length;f<j;f++){var g=isNumericRegex.test(h[f]);e["column-"+f]=g?parseFloat(h[f]):h[f]}return e})}else{c.columns=a.map(d.keys,function(f,e){return{id:"header-"+f,name:f,field:"column-"+f,sortable:true}});c.data=a.map(d.data,function(h,j){var e={id:j};for(i in h){var g=h[i];var f=isNumericRegex.test(g);e["column-"+c.columns[i].name]=f?parseFloat(g):g}return e})}return c};b.initialize=function(c,d){b.$dialog=a("#"+c);d=d||{};b.timeout=d.timeout||b.timeout;var e=Math.round(a(window).height()*0.6);b.dialogOptions={autoOpen:false,position:["center","center"],buttons:[],width:a(window).width()-20,height:a(window).height()-20,resize:"auto",modal:false,draggable:true,resizable:true};b.errorDialogOptions={title:"Unable to Preview - Had an error from dataproxy",position:["center","center"],buttons:[{text:"OK",click:function(){a(this).dialog("close")}}],width:360,height:180,resizable:false,draggable:false,modal:true,position:"fixed"}};a.extend(true,window,{DATAEXPLORER:{}});DATAEXPLORER.TABLEVIEW=b})(jQuery);