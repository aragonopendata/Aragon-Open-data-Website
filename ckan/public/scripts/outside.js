var CKAN=CKAN||{};(function(a){a(document).ready(function(){CKAN.DataPreviewIframe.attachToIframe()})}(jQuery));CKAN.DataPreviewIframe=function(b,c){var a=function(f){var e=f;offset=0;var d=f.contents().height();f.animate({height:d+offset},d)};c.$iframes=b(".ckanext-datapreview-iframe");c.attachToIframe=function(){b.each(c.$iframes,function(e,f){var g=function(){d=setTimeout(function(){a(f)},100)};f=b(f);f.load(function(){loc=window.location.protocol+"//"+window.location.host;if(f.attr("src").substring(0,loc.length)===loc){g();f.contents().find("body").resize(function(){g()})}else{f.animate({height:600},600)}});var d;if(/#$/.test(this.src)){this.src=this.src.substr(0,this.src.length-1)}else{this.src=this.src+"#"}})};c.getChild=function(d){return b(d)[0].contentWindow};b.extend(true,window,{CKANEXT:{}});CKANEXT.DATAPREVIEW=c;return c}(jQuery,CKAN.DataPreview||{});