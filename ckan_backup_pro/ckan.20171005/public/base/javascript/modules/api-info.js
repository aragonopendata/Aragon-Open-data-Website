this.ckan.module("api-info",function(b,a){return{modal:null,options:{template:null,i18n:{noTemplate:a("There is no API data to load for this resource"),loadError:a("Failed to load data API information")}},initialize:function(){b.proxyAll(this,/_on/);this.el.on("click",this._onClick);this.el.button()},loading:function(c){this.el.button(c!==false?"loading":"reset")},show:function(){var c=this.sandbox,d=this;if(this.modal){return this.modal.modal("show")}this.loadTemplate().done(function(e){d.modal=b(e);d.modal.find(".modal-header :header").append('<button class="close" data-dismiss="modal">Ã—</button>');d.modal.modal().appendTo(c.body)})},hide:function(){if(this.modal){this.modal.modal("hide")}},loadTemplate:function(){if(!this.options.template){this.sandbox.notify(this.i18n("noTemplate"));return b.Deferred().reject().promise()}if(!this.promise){this.loading();this.promise=b.get(this.options.template);this.promise.then(this._onTemplateSuccess,this._onTemplateError)}return this.promise},_onClick:function(c){c.preventDefault();this.show()},_onTemplateSuccess:function(){this.loading(false)},_onTemplateError:function(){this.loading(false);this.sandbox.notify(this.i18n("loadError"))}}});