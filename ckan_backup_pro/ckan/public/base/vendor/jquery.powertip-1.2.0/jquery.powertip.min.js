/*!
 PowerTip - v1.2.0 - 2013-04-03
 http://stevenbenner.github.com/jquery-powertip/
 Copyright (c) 2013 Steven Benner (http://stevenbenner.com/).
 Released under MIT license.
 https://raw.github.com/stevenbenner/jquery-powertip/master/LICENSE.txt
*/
(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(X){function F(){var a=this;a.top="auto",a.left="auto",a.right="auto",a.bottom="auto",a.set=function(b,c){X.isNumeric(c)&&(a[b]=Math.round(c))}}function L(h,m,c){function d(e,a){b(),h.data(D)||(e?(a&&h.data(N,!0),c.showTip(h)):(q.tipOpenImminent=!0,f=setTimeout(function(){f=null,p()},m.intentPollInterval)))}function g(a){b(),q.tipOpenImminent=!1,h.data(D)&&(h.data(N,!1),a?c.hideTip(h):(q.delayInProgress=!0,f=setTimeout(function(){f=null,c.hideTip(h),q.delayInProgress=!1},m.closeDelay)))}function p(){var a=Math.abs(q.previousX-q.currentX),e=Math.abs(q.previousY-q.currentY),l=a+e;m.intentSensitivity>l?c.showTip(h):(q.previousX=q.currentX,q.previousY=q.currentY,d())}function b(){f=clearTimeout(f),q.delayInProgress=!1}function k(){c.resetPosition(h)}var f=null;this.show=d,this.hide=g,this.cancel=b,this.resetPosition=k}function M(){function a(n,h,k,f,d){var m,o=h.split("-")[0],g=new F;switch(m=G(n)?c(n,o):b(n,o),h){case"n":g.set("left",m.left-k/2),g.set("bottom",q.windowHeight-m.top+d);break;case"e":g.set("left",m.left+d),g.set("top",m.top-f/2);break;case"s":g.set("left",m.left-k/2),g.set("top",m.top+d);break;case"w":g.set("top",m.top-f/2),g.set("right",q.windowWidth-m.left+d);break;case"nw":g.set("bottom",q.windowHeight-m.top+d),g.set("right",q.windowWidth-m.left-20);break;case"nw-alt":g.set("left",m.left),g.set("bottom",q.windowHeight-m.top+d);break;case"ne":g.set("left",m.left-20),g.set("bottom",q.windowHeight-m.top+d);break;case"ne-alt":g.set("bottom",q.windowHeight-m.top+d),g.set("right",q.windowWidth-m.left);break;case"sw":g.set("top",m.top+d),g.set("right",q.windowWidth-m.left-20);break;case"sw-alt":g.set("left",m.left),g.set("top",m.top+d);break;case"se":g.set("left",m.left-20),g.set("top",m.top+d);break;case"se-alt":g.set("top",m.top+d),g.set("right",q.windowWidth-m.left)}return g}function b(k,f){var l,m,d=k.offset(),g=k.outerWidth(),h=k.outerHeight();switch(f){case"n":l=d.left+g/2,m=d.top;break;case"e":l=d.left+g,m=d.top+h/2;break;case"s":l=d.left+g/2,m=d.top+h;break;case"w":l=d.left,m=d.top+h/2;break;case"nw":l=d.left,m=d.top;break;case"ne":l=d.left+g,m=d.top;break;case"sw":l=d.left,m=d.top+h;break;case"se":l=d.left+g,m=d.top+h}return{top:m,left:l}}function c(P,ag){function m(){T.push(k.matrixTransform(af))}var v,H,ah,g,ad=P.closest("svg")[0],y=P[0],k=ad.createSVGPoint(),ac=y.getBBox(),af=y.getScreenCTM(),O=ac.width/2,ae=ac.height/2,T=[],I=["nw","n","ne","e","se","s","sw","w"];if(k.x=ac.x,k.y=ac.y,m(),k.x+=O,m(),k.x+=O,m(),k.y+=ae,m(),k.y+=ae,m(),k.x-=O,m(),k.x-=O,m(),k.y-=ae,m(),T[0].y!==T[1].y||T[0].x!==T[7].x){for(H=Math.atan2(af.b,af.a)*x,ah=Math.ceil((H%360-22.5)/45),1>ah&&(ah+=8);ah--;){I.push(I.shift())}}for(g=0;T.length>g;g++){if(I[g]===ag){v=T[g];break}}return{top:v.y+q.scrollTop,left:v.x+q.scrollLeft}}this.compute=a}function S(d){function f(a){a.data(D,!0),g.queue(function(b){p(a),b()})}function p(b){var a;if(b.data(D)){if(q.isTipOpen){return q.isClosing||c(q.activeHover),g.delay(100).queue(function(i){p(b),i()}),void 0}b.trigger("powerTipPreRender"),a=K(b),a&&(g.empty().append(a),b.trigger("powerTipRender"),q.activeHover=b,q.isTipOpen=!0,g.data(V,d.mouseOnToPopup),d.followMouse?m():(l(b),q.isFixedTipOpen=!0),g.fadeIn(d.fadeInTime,function(){q.desyncTimeout||(q.desyncTimeout=setInterval(n,500)),b.trigger("powerTipOpen")}))}}function c(a){q.isClosing=!0,q.activeHover=null,q.isTipOpen=!1,q.desyncTimeout=clearInterval(q.desyncTimeout),a.data(D,!1),a.data(N,!1),g.fadeOut(d.fadeOutTime,function(){var b=new F;q.isClosing=!1,q.isFixedTipOpen=!1,g.removeClass(),b.set("top",q.currentY+d.offset),b.set("left",q.currentX+d.offset),g.css(b),a.trigger("powerTipClose")})}function m(){if(!q.isFixedTipOpen&&(q.isTipOpen||q.tipOpenImminent&&g.data(j))){var o,t,a=g.outerWidth(),b=g.outerHeight(),k=new F;k.set("top",q.currentY+d.offset),k.set("left",q.currentX+d.offset),o=Z(k,a,b),o!==A.none&&(t=E(o),1===t?o===A.right?k.set("left",q.windowWidth-a):o===A.bottom&&k.set("top",q.scrollTop+q.windowHeight-b):(k.set("left",q.currentX-a-d.offset),k.set("top",q.currentY-b-d.offset))),g.css(k)}}function l(b){var k,a;d.smartPlacement?(k=X.fn.powerTip.smartPlacementLists[d.placement],X.each(k,function(i,r){var s=Z(h(b,r),g.outerWidth(),g.outerHeight());return a=r,s===A.none?!1:void 0})):(h(b,d.placement),a=d.placement),g.addClass(a)}function h(u,v){var k,o,t=0,b=new F;b.set("top",0),b.set("left",0),g.css(b);do{k=g.outerWidth(),o=g.outerHeight(),b=e.compute(u,v,k,o,d.offset),g.css(b)}while(5>=++t&&(k!==g.outerWidth()||o!==g.outerHeight()));return b}function n(){var a=!1;!q.isTipOpen||q.isClosing||q.delayInProgress||(q.activeHover.data(D)===!1||q.activeHover.is(":disabled")?a=!0:Q(q.activeHover)||q.activeHover.is(":focus")||q.activeHover.data(N)||(g.data(V)?Q(g)||(a=!0):a=!0),a&&c(q.activeHover))}var e=new M,g=X("#"+d.popupId);0===g.length&&(g=X("<div/>",{id:d.popupId}),0===Y.length&&(Y=X("body")),Y.append(g)),d.followMouse&&(g.data(j)||(W.on("mousemove",m),C.on("scroll",m),g.data(j,!0))),d.mouseOnToPopup&&g.on({mouseenter:function(){g.data(V)&&q.activeHover&&q.activeHover.data(U).cancel()},mouseleave:function(){q.activeHover&&q.activeHover.data(U).hide()}}),this.showTip=f,this.hideTip=c,this.resetPosition=l}function G(a){return window.SVGElement&&a[0] instanceof SVGElement}function J(){q.mouseTrackingActive||(q.mouseTrackingActive=!0,X(function(){q.scrollLeft=C.scrollLeft(),q.scrollTop=C.scrollTop(),q.windowWidth=C.width(),q.windowHeight=C.height()}),W.on("mousemove",ab),C.on({resize:function(){q.windowWidth=C.width(),q.windowHeight=C.height()},scroll:function(){var b=C.scrollLeft(),a=C.scrollTop();b!==q.scrollLeft&&(q.currentX+=b-q.scrollLeft,q.scrollLeft=b),a!==q.scrollTop&&(q.currentY+=a-q.scrollTop,q.scrollTop=a)}}))}function ab(a){q.currentX=a.pageX,q.currentY=a.pageY}function Q(c){var b=c.offset(),d=c[0].getBoundingClientRect(),f=d.right-d.left,a=d.bottom-d.top;return q.currentX>=b.left&&q.currentX<=b.left+f&&q.currentY>=b.top&&q.currentY<=b.top+a}function K(b){var e,f,a=b.data(z),c=b.data(B),d=b.data(R);return a?(X.isFunction(a)&&(a=a.call(b[0])),f=a):c?(X.isFunction(c)&&(c=c.call(b[0])),c.length>0&&(f=c.clone(!0,!0))):d&&(e=X("#"+d),e.length>0&&(f=e.html())),f}function Z(h,d,k){var l=q.scrollTop,c=q.scrollLeft,f=l+q.windowHeight,g=c+q.windowWidth,b=A.none;return(l>h.top||l>Math.abs(h.bottom-q.windowHeight)-k)&&(b|=A.top),(h.top+k>f||Math.abs(h.bottom-q.windowHeight)>f)&&(b|=A.bottom),(c>h.left||h.right+d>g)&&(b|=A.left),(h.left+d>g||c>h.right)&&(b|=A.right),b}function E(b){for(var a=0;b;){b&=b-1,a++}return a}var W=X(document),C=X(window),Y=X("body"),U="displayController",D="hasActiveHover",N="forcedOpen",j="hasMouseMove",V="mouseOnToPopup",aa="originalTitle",z="powertip",B="powertipjq",R="powertiptarget",x=180/Math.PI,q={isTipOpen:!1,isFixedTipOpen:!1,isClosing:!1,tipOpenImminent:!1,activeHover:null,currentX:0,currentY:0,previousX:0,previousY:0,desyncTimeout:null,mouseTrackingActive:!1,delayInProgress:!1,windowWidth:0,windowHeight:0,scrollTop:0,scrollLeft:0},A={none:0,top:1,bottom:2,left:4,right:8};X.fn.powerTip=function(c,e){if(!this.length){return this}if("string"===X.type(c)&&X.powerTip[c]){return X.powerTip[c].call(this,this,e)}var d=X.extend({},X.fn.powerTip.defaults,c),b=new S(d);return J(),this.each(function(){var g,k=X(this),f=k.data(z),h=k.data(B),a=k.data(R);k.data(U)&&X.powerTip.destroy(k),g=k.attr("title"),f||a||h||!g||(k.data(z,g),k.data(aa,g),k.removeAttr("title")),k.data(U,new L(k,d,b))}),d.manual||this.on({"mouseenter.powertip":function(a){X.powerTip.show(this,a)},"mouseleave.powertip":function(){X.powerTip.hide(this)},"focus.powertip":function(){X.powerTip.show(this)},"blur.powertip":function(){X.powerTip.hide(this,!0)},"keydown.powertip":function(a){27===a.keyCode&&X.powerTip.hide(this,!0)}}),this},X.fn.powerTip.defaults={fadeInTime:200,fadeOutTime:100,followMouse:!1,popupId:"powerTip",intentSensitivity:7,intentPollInterval:100,closeDelay:100,placement:"n",smartPlacement:!1,offset:10,mouseOnToPopup:!1,manual:!1},X.fn.powerTip.smartPlacementLists={n:["n","ne","nw","s"],e:["e","ne","se","w","nw","sw","n","s","e"],s:["s","se","sw","n"],w:["w","nw","sw","e","ne","se","n","s","w"],nw:["nw","w","sw","n","s","se","nw"],ne:["ne","e","se","n","s","sw","ne"],sw:["sw","w","nw","s","n","ne","sw"],se:["se","e","ne","s","n","nw","se"],"nw-alt":["nw-alt","n","ne-alt","sw-alt","s","se-alt","w","e"],"ne-alt":["ne-alt","n","nw-alt","se-alt","s","sw-alt","e","w"],"sw-alt":["sw-alt","s","se-alt","nw-alt","n","ne-alt","w","e"],"se-alt":["se-alt","s","sw-alt","ne-alt","n","nw-alt","e","w"]},X.powerTip={show:function(a,b){return b?(ab(b),q.previousX=b.pageX,q.previousY=b.pageY,X(a).data(U).show()):X(a).first().data(U).show(!0,!0),a},reposition:function(a){return X(a).first().data(U).resetPosition(),a},hide:function(a,b){return a?X(a).first().data(U).hide(b):q.activeHover&&q.activeHover.data(U).hide(!0),a},destroy:function(a){return X(a).off(".powertip").each(function(){var b=X(this),c=[aa,U,D,N];b.data(aa)&&(b.attr("title",b.data(aa)),c.push(z)),b.removeData(c)}),a}},X.powerTip.showTip=X.powerTip.show,X.powerTip.closeTip=X.powerTip.hide});