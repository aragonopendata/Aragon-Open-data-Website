(function(a){if(typeof a.fn.each2=="undefined"){a.fn.extend({each2:function(f){var d=a([0]),e=-1,b=this.length;while(++e<b&&(d.context=d[0]=this[e])&&f.call(d[0],e,d)!==false){}return this}})}})(jQuery);(function(i,k){if(window.Select2!==k){return}var c,e,v,A,s,a;c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(B){B=B.which?B.which:B;switch(B){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return true}return false},isControl:function(B){B=B.which?B.which:B;switch(B){case c.SHIFT:case c.CTRL:case c.ALT:return true}if(B.metaKey){return true}return false},isFunctionKey:function(B){B=B.which?B.which:B;return B>=112&&B<=123}};s=(function(){var B=1;return function(){return B++}}());function u(B){if(B&&typeof(B)==="string"){return B.replace("&","&amp;")}else{return B}}function b(E,F){var D=0,B=F.length,C;if(typeof E==="undefined"){return -1}if(E.constructor===String){for(;D<B;D=D+1){if(E.localeCompare(F[D])===0){return D}}}else{for(;D<B;D=D+1){C=F[D];if(C.constructor===String){if(C.localeCompare(E)===0){return D}}else{if(C===E){return D}}}}return -1}function p(C,B){if(C===B){return true}if(C===k||B===k){return false}if(C===null||B===null){return false}if(C.constructor===String){return C.localeCompare(B)===0}if(B.constructor===String){return B.localeCompare(C)===0}return false}function l(C,E){var F,D,B;if(C===null||C.length<1){return[]}F=C.split(E);for(D=0,B=F.length;D<B;D=D+1){F[D]=i.trim(F[D])}return F}function m(B){return B.outerWidth()-B.width()}function y(C){var B="keyup-change-value";C.bind("keydown",function(){if(i.data(C,B)===k){i.data(C,B,C.val())}});C.bind("keyup",function(){var D=i.data(C,B);if(D!==k&&C.val()!==D){i.removeData(C,B);C.trigger("keyup-change")}})}i(document).delegate("*","mousemove",function(B){i.data(document,"select2-lastpos",{x:B.pageX,y:B.pageY})});function t(B){B.bind("mousemove",function(D){var C=i.data(document,"select2-lastpos");if(C===k||C.x!==D.pageX||C.y!==D.pageY){i(D.target).trigger("mousemove-filtered",D)}})}function g(D,B){var C;return function(){window.clearTimeout(C);C=window.setTimeout(B,D)}}function z(D){var B=false,C;return function(){if(B===false){C=D();B=true}return C}}function f(B,D){var C=g(B,function(E){D.trigger("scroll-debounced",E)});D.bind("scroll",function(E){if(b(E.target,D.get())>=0){C(E)}})}function d(B){B.preventDefault();B.stopPropagation()}function x(C){if(!a){var B=C[0].currentStyle||window.getComputedStyle(C[0],null);a=i("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:B.fontSize,fontFamily:B.fontFamily,fontStyle:B.fontStyle,fontWeight:B.fontWeight,letterSpacing:B.letterSpacing,textTransform:B.textTransform,whiteSpace:"nowrap"});i("body").append(a)}a.text(C.val());return a.width()}function h(F,E,C){var D=F.toUpperCase().indexOf(E.toUpperCase()),B=E.length;if(D<0){C.push(F);return}C.push(F.substring(0,D));C.push("<span class='select2-match'>");C.push(F.substring(D,D+B));C.push("</span>");C.push(F.substring(D+B,F.length))}function o(C){var E,B=0,D=null,F=C.quietMillis||100;return function(G){window.clearTimeout(E);E=window.setTimeout(function(){B+=1;var H=B,J=C.data,K=C.transport||i.ajax,I=C.type||"GET";J=J.call(this,G.term,G.page,G.context);if(null!==D){D.abort()}D=K.call(null,{url:C.url,dataType:C.dataType,data:J,type:I,success:function(M){if(H<B){return}var L=C.results(M,G.page);G.callback(L)}})},F)}}function q(B){var D=B,C,E=function(F){return""+F.text};if(!i.isArray(D)){E=D.text;if(!i.isFunction(E)){C=D.text;E=function(F){return F[C]}}D=D.results}return function(H){var G=H.term,F={};if(G===""){H.callback({results:D});return}F.results=i(D).filter(function(){return H.matcher(G,E(this))}).get();H.callback(F)}}function n(B){if(i.isFunction(B)){return B}return function(E){var D=E.term,C={results:[]};i(B).each(function(){var F=this.text!==k,G=F?this.text:this;if(D===""||E.matcher(D,G)){C.results.push(F?this:{id:this,text:this})}});E.callback(C)}}function j(B,C){if(i.isFunction(B)){return true}if(!B){return fasle}throw new Error("formatterName must be a function or a falsy value")}i(document).ready(function(){i(document).delegate("*","mousedown touchend",function(D){var C=i(D.target).closest("div.select2-container").get(0),B;if(C){i(document).find("div.select2-container-active").each(function(){if(this!==C){i(this).data("select2").blur()}})}else{C=i(D.target).closest("div.select2-drop").get(0);i(document).find("div.select2-drop-active").each(function(){if(this!==C){i(this).data("select2").blur()}})}C=i(D.target);B=C.attr("for");if("LABEL"===D.target.tagName&&B&&B.length>0){C=i("#"+B);C=C.data("select2");if(C!==k){C.focus();D.preventDefault()}}})});function r(B){return i.isFunction(B)?B():B}function w(B,C){var D=function(){};D.prototype=new B;D.prototype.constructor=D;D.prototype.parent=B.prototype;D.prototype=i.extend(D.prototype,C);return D}e=w(Object,{bind:function(C){var B=this;return function(){C.apply(B,arguments)}},init:function(D){var C,B,E=".select2-results";this.opts=D=this.prepareOpts(D);this.id=D.id;if(D.element.data("select2")!==k&&D.element.data("select2")!==null){this.destroy()}this.enabled=true;this.container=this.createContainer();this.body=z(function(){return D.element.closest("body")});if(D.element.attr("class")!==k){this.container.addClass(D.element.attr("class"))}this.container.css(r(D.containerCss));this.container.addClass(r(D.containerCssClass));this.opts.element.data("select2",this).hide().after(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.css(r(D.dropdownCss));this.dropdown.addClass(r(D.dropdownCssClass));this.dropdown.data("select2",this);this.results=C=this.container.find(E);this.search=B=this.container.find("input.select2-input");B.attr("tabIndex",this.opts.element.attr("tabIndex"));this.resultsPage=0;this.context=null;this.initContainer();this.initContainerWidth();t(this.results);this.dropdown.delegate(E,"mousemove-filtered",this.bind(this.highlightUnderEvent));f(80,this.results);this.dropdown.delegate(E,"scroll-debounced",this.bind(this.loadMoreIfNeeded));if(i.fn.mousewheel){C.mousewheel(function(J,K,H,G){var I=C.scrollTop(),F;if(G>0&&I-G<=0){C.scrollTop(0);d(J)}else{if(G<0&&C.get(0).scrollHeight-C.scrollTop()+G<=C.height()){C.scrollTop(C.get(0).scrollHeight-C.height());d(J)}}})}y(B);B.bind("keyup-change",this.bind(this.updateResults));B.bind("focus",function(){B.addClass("select2-focused");if(B.val()===" "){B.val("")}});B.bind("blur",function(){B.removeClass("select2-focused")});this.dropdown.delegate(E,"mouseup",this.bind(function(F){if(i(F.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0){this.highlightUnderEvent(F);this.selectHighlighted(F)}else{this.focusSearch()}d(F)}));this.dropdown.bind("click mouseup mousedown",function(F){F.stopPropagation()});if(i.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(D.element.is(":disabled")){this.disable()}},destroy:function(){var B=this.opts.element.data("select2");if(B!==k){B.container.remove();B.dropdown.remove();B.opts.element.removeData("select2").unbind(".select2").show()}},prepareOpts:function(F){var D,C,B,E;D=F.element;if(D.get(0).tagName.toLowerCase()==="select"){this.select=C=F.element}F.separator=F.separator||",";if(C){i.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in F){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}F=i.extend({},{populateResults:function(H,J,M){var L,K,G,I,N=this.opts.id;L=function(T,O,S){var U,Q,Z,W,Y,P,X,V,R;for(U=0,Q=T.length;U<Q;U=U+1){Z=T[U];W=N(Z)!==k;Y=("children" in Z)&&Z.children.length>0;P=i("<li></li>");P.addClass("select2-results-dept-"+S);P.addClass("select2-result");P.addClass(W?"select2-result-selectable":"select2-result-unselectable");if(Y){P.addClass("select2-result-with-children")}X=i("<div></div>");X.addClass("select2-result-label");R=F.formatResult(Z,X,M);if(R!==k){X.html(u(R))}P.append(X);if(Y){V=i("<ul></ul>");V.addClass("select2-result-sub");L(Z.children,V,S+1);P.append(V)}P.data("select2-data",Z);O.append(P)}};L(J,H,0)}},i.fn.select2.defaults,F);if(typeof(F.id)!=="function"){B=F.id;F.id=function(G){return G[B]}}if(C){F.query=this.bind(function(J){var I={results:[],more:false},H=J.term,G,L,K;K=function(M,O){var N;if(M.is("option")){if(J.matcher(H,M.text(),M)){O.push({id:M.attr("value"),text:M.text(),element:M.get()})}}else{if(M.is("optgroup")){N={text:M.attr("label"),children:[],element:M.get()};M.children().each2(function(P,Q){K(Q,N.children)});if(N.children.length>0){O.push(N)}}}};G=D.children();if(this.getPlaceholder()!==k&&G.length>0){L=G[0];if(i(L).text()===""){G=G.not(L)}}G.each2(function(M,N){K(N,I.results)});J.callback(I)});F.id=function(G){return G.id}}else{if(!("query" in F)){if("ajax" in F){E=F.element.data("ajax-url");if(E&&E.length>0){F.ajax.url=E}F.query=o(F.ajax)}else{if("data" in F){F.query=q(F.data)}else{if("tags" in F){F.query=n(F.tags);F.createSearchChoice=function(G){return{id:G,text:G}};F.initSelection=function(G,I){var H=[];i(l(G.val(),F.separator)).each(function(){var L=this,K=this,J=F.tags;if(i.isFunction(J)){J=J()}i(J).each(function(){if(p(this.id,L)){K=this.text;return false}});H.push({id:L,text:K})});I(H)}}}}}}if(typeof(F.query)!=="function"){throw"query function not defined for Select2 "+F.element.attr("id")}return F},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(B){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}))},triggerChange:function(B){B=B||{};B=i.extend({},B,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(B);this.opts.element.data("select2-change-triggered",false);this.opts.element.click()},enable:function(){if(this.enabled){return}this.enabled=true;this.container.removeClass("select2-container-disabled")},disable:function(){if(!this.enabled){return}this.close();this.enabled=false;this.container.addClass("select2-container-disabled")},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var F=this.container.offset(),L=this.container.outerHeight(),C=this.container.outerWidth(),E=this.dropdown.outerHeight(),I=i(window).scrollTop()+document.documentElement.clientHeight,B=F.top+L,J=B+E<=I,H=(F.top-E)>=this.body().scrollTop(),D=this.dropdown.hasClass("select2-drop-above"),K,G;if(D){K=true;if(!H&&J){K=false}}else{K=false;if(!J&&H){K=true}}K=false;if(K){B=F.top-E;this.container.addClass("select2-drop-above");this.dropdown.addClass("select2-drop-above")}else{this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")}G={top:B,left:F.left,width:C};this.dropdown.css(G)},shouldOpen:function(){var B;if(this.opened()){return false}B=jQuery.Event("open");this.opts.element.trigger(B);return !B.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return false}window.setTimeout(this.bind(this.opening),1);return true},opening:function(){this.clearDropdownAlignmentPreference();if(this.search.val()===" "){this.search.val("")}this.dropdown.addClass("select2-drop-active");this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.updateResults(true);if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body())}this.dropdown.show();this.ensureHighlightVisible();this.positionDropdown();this.focusSearch()},close:function(){if(!this.opened()){return}this.clearDropdownAlignmentPreference();this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.opts.element.trigger(jQuery.Event("close"))},clearSearch:function(){},ensureHighlightVisible:function(){var E=this.results,D,B,I,H,F,G,C;B=this.highlight();if(B<0){return}if(B==0){E.scrollTop(0);return}D=E.find(".select2-result-selectable");I=i(D[B]);H=I.offset().top+I.outerHeight();if(B===D.length-1){C=E.find("li.select2-more-results");if(C.length>0){H=C.offset().top+C.outerHeight()}}F=E.offset().top+E.outerHeight();if(H>F){E.scrollTop(E.scrollTop()+(H-F))}G=I.offset().top-E.offset().top;if(G<0){E.scrollTop(E.scrollTop()+G)}},moveHighlight:function(E){var D=this.results.find(".select2-result-selectable"),C=this.highlight();while(C>-1&&C<D.length){C+=E;var B=i(D[C]);if(B.hasClass("select2-result-selectable")&&!B.hasClass("select2-disabled")){this.highlight(C);break}}},highlight:function(B){var C=this.results.find(".select2-result-selectable").not(".select2-disabled");if(arguments.length===0){return b(C.filter(".select2-highlighted")[0],C.get())}if(B>=C.length){B=C.length-1}if(B<0){B=0}C.removeClass("select2-highlighted");i(C[B]).addClass("select2-highlighted");this.ensureHighlightVisible()},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(C){var B=i(C.target).closest(".select2-result-selectable");if(B.length>0&&!B.is(".select2-highlighted")){var D=this.results.find(".select2-result-selectable");this.highlight(D.index(B))}else{if(B.length==0){this.results.find(".select2-highlighted").removeClass("select2-highlighted")}}},loadMoreIfNeeded:function(){var F=this.results,E=F.find("li.select2-more-results"),I,H=-1,G=this.resultsPage+1,B=this,D=this.search.val(),C=this.context;if(E.length===0){return}I=E.offset().top-F.offset().top-F.height();if(I<=0){E.addClass("select2-active");this.opts.query({term:D,page:G,context:C,matcher:this.opts.matcher,callback:this.bind(function(J){B.opts.populateResults.call(this,F,J.results,{term:D,page:G,context:C});if(J.more===true){E.detach().appendTo(F.children(":last")).text(B.opts.formatLoadMore(G+1));window.setTimeout(function(){B.loadMoreIfNeeded()},10)}else{E.remove()}B.positionDropdown();B.resultsPage=G})})}},updateResults:function(C){var E=this.search,D=this.results,H=this.opts,I,B=this;if(C!==true&&(this.showSearchInput===false||!this.opened())){return}E.addClass("select2-active");function G(){D.scrollTop(0);E.removeClass("select2-active");B.positionDropdown()}function F(J){D.html(u(J));G()}if(H.maximumSelectionSize>=1){I=this.data();if(i.isArray(I)&&I.length>=H.maximumSelectionSize&&j(H.formatSelectionTooBig,"formatSelectionTooBig")){F("<li class='select2-selection-limit'>"+H.formatSelectionTooBig(H.maximumSelectionSize)+"</li>");return}}if(E.val().length<H.minimumInputLength&&j(H.formatInputTooShort,"formatInputTooShort")){return}this.resultsPage=1;H.query({term:E.val(),page:this.resultsPage,context:null,matcher:H.matcher,callback:this.bind(function(K){var J;this.context=(K.context===k)?null:K.context;if(this.opts.createSearchChoice&&E.val()!==""){J=this.opts.createSearchChoice.call(null,E.val(),K.results);if(J!==k&&J!==null&&B.id(J)!==k&&B.id(J)!==null){if(i(K.results).filter(function(){return p(B.id(this),B.id(J))}).length===0){K.results.unshift(J)}}}if(K.results.length===0&&j(H.formatNoMatches,"formatNoMatches")){return}D.empty();B.opts.populateResults.call(this,D,K.results,{term:E.val(),page:this.resultsPage,context:null});if(K.more===true&&j(H.formatLoadMore,"formatLoadMore")){D.children().filter(":last").append("<li class='select2-more-results'>"+u(H.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){B.loadMoreIfNeeded()},10)}this.postprocessResults(K,C);G()})})},cancel:function(){this.close()},blur:function(){this.close();this.container.removeClass("select2-container-active");this.dropdown.removeClass("select2-drop-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){window.setTimeout(this.bind(function(){this.search.focus();this.search.val(this.search.val())}),10)},selectHighlighted:function(){var B=this.highlight(),C=this.results.find(".select2-highlighted").not(".select2-disabled"),D=C.closest(".select2-result-selectable").data("select2-data");if(D){C.addClass("select2-disabled");this.highlight(B);this.onSelect(D)}},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function C(){var G,E,H,F,D;if(this.opts.width==="off"){return null}else{if(this.opts.width==="element"){return this.opts.element.outerWidth()===0?"auto":this.opts.element.outerWidth()+"px"}else{if(this.opts.width==="copy"||this.opts.width==="resolve"){G=this.opts.element.attr("style");if(G!==k){E=G.split(";");for(F=0,D=E.length;F<D;F=F+1){H=E[F].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(H!==null&&H.length>=1){return H[1]}}}if(this.opts.width==="resolve"){G=this.opts.element.css("width");if(G.indexOf("%")>0){return G}return(this.opts.element.outerWidth()===0?"auto":this.opts.element.outerWidth()+"px")}return null}else{if(i.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}}}}var B=C.call(this);if(B!==null){this.container.attr("style","width: "+B)}}});v=w(e,{createContainer:function(){var B=i("<div></div>",{"class":"select2-container"}).html(["    <a href='javascript:void(0)' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <li class='select2-search'>","       Comience a escribir la etiqueta que desee (se mostrará como sugerencias las ya almacenadas en el sistema):","       <input type='text' autocomplete='off' class='select2-input'/>","   </li>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return B},opening:function(){this.search.show();this.parent.opening.apply(this,arguments);this.dropdown.removeClass("select2-offscreen")},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments);this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show()},focus:function(){this.close();this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments);this.selection.focus()},initContainer:function(){var D,C=this.container,E=this.dropdown,B=false;this.selection=D=C.find(".select2-choice");this.search.bind("keydown",this.bind(function(F){if(!this.enabled){return}if(F.which===c.PAGE_UP||F.which===c.PAGE_DOWN){d(F);return}if(this.opened()){switch(F.which){case c.UP:case c.DOWN:this.moveHighlight((F.which===c.UP)?-1:1);d(F);return;case c.TAB:case c.ENTER:this.selectHighlighted();d(F);return;case c.ESC:this.cancel(F);d(F);return}}else{if(F.which===c.TAB||c.isControl(F)||c.isFunctionKey(F)||F.which===c.ESC){return}this.open();if(F.which===c.ENTER){return}}}));this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")}));this.search.bind("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active")}window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)}));D.bind("mousedown",this.bind(function(F){B=true;if(this.opened()){this.close();this.selection.focus()}else{if(this.enabled){this.open()}}d(F);B=false}));E.bind("mousedown",this.bind(function(){this.search.focus()}));D.bind("focus",this.bind(function(){this.container.addClass("select2-container-active");this.search.attr("tabIndex","-1")}));D.bind("blur",this.bind(function(){this.container.removeClass("select2-container-active");window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)}));D.bind("keydown",this.bind(function(G){if(!this.enabled){return}if(G.which===c.PAGE_UP||G.which===c.PAGE_DOWN){d(G);return}if(G.which===c.TAB||c.isControl(G)||c.isFunctionKey(G)||G.which===c.ESC){return}this.open();if(G.which===c.ENTER){d(G);return}if(G.which<48){d(G);return}var F=String.fromCharCode(G.which).toLowerCase();if(G.shiftKey){F=F.toUpperCase()}this.search.val(F);d(G)}));D.delegate("abbr","mousedown",this.bind(function(F){if(!this.enabled){return}this.clear();d(F);this.close();this.triggerChange();this.selection.focus()}));this.setPlaceholder();this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder()},initSelection:function(){var C;if(this.opts.element.val()===""){this.close();this.setPlaceholder()}else{var B=this;this.opts.initSelection.call(null,this.opts.element,function(D){if(D!==k&&D!==null){B.updateSelection(D);B.close();B.setPlaceholder()}})}},prepareOpts:function(){var B=this.parent.prepareOpts.apply(this,arguments);if(B.element.get(0).tagName.toLowerCase()==="select"){B.initSelection=function(C,E){var D=C.find(":selected");if(i.isFunction(E)){E({id:D.attr("value"),text:D.text()})}}}return B},setPlaceholder:function(){var B=this.getPlaceholder();if(this.opts.element.val()===""&&B!==k){if(this.select&&this.select.find("option:first").text()!==""){return}this.selection.find("span").html(u(B));this.selection.addClass("select2-default");this.selection.find("abbr").hide()}},postprocessResults:function(E,C){var D=0,B=this,F=true;this.results.find(".select2-result-selectable").each2(function(G,H){if(p(B.id(H.data("select2-data")),B.opts.element.val())){D=G;return false}});this.highlight(D);if(C===true){F=this.showSearchInput=E.results.length>=this.opts.minimumResultsForSearch;this.dropdown.find(".select2-search")[F?"removeClass":"addClass"]("select2-search-hidden");i(this.dropdown,this.container)[F?"addClass":"removeClass"]("select2-with-searchbox")}},onSelect:function(C){var B=this.opts.element.val();this.opts.element.val(this.id(C));this.updateSelection(C);this.close();this.selection.focus();if(!p(B,this.id(C))){this.triggerChange()}},updateSelection:function(D){var B=this.selection.find("span"),C;this.selection.data("select2-data",D);B.empty();C=this.opts.formatSelection(D,B);if(C!==k){B.append(u(C))}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==k){this.selection.find("abbr").show()}},val:function(){var D,C=null,B=this;if(arguments.length===0){return this.opts.element.val()}D=arguments[0];if(this.select){this.select.val(D).find(":selected").each2(function(E,F){C={id:F.attr("value"),text:F.text()};return false});this.updateSelection(C);this.setPlaceholder()}else{if(this.opts.initSelection===k){throw new Error("cannot call val() if initSelection() is not defined")}if(!D){this.clear();return}this.opts.initSelection(this.opts.element,function(E){B.opts.element.val(!E?"":B.id(E));B.updateSelection(E);B.setPlaceholder()})}},clearSearch:function(){this.search.val("")},data:function(C){var B;if(arguments.length===0){B=this.selection.data("select2-data");if(B==k){B=null}return B}else{if(!C||C===""){this.clear()}else{this.opts.element.val(!C?"":this.id(C));this.updateSelection(C)}}}});A=w(e,{createContainer:function(){var B=i("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' style='width: 25px;' class='select2-input oculto'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return B},prepareOpts:function(){var B=this.parent.prepareOpts.apply(this,arguments);if(B.element.get(0).tagName.toLowerCase()==="select"){B.initSelection=function(C,E){var D=[];C.find(":selected").each2(function(F,G){D.push({id:G.attr("value"),text:G.text()})});if(i.isFunction(E)){E(D)}}}return B},initContainer:function(){var B=".select2-choices",C;this.searchContainer=this.container.find(".select2-search-field");this.selection=C=this.container.find(B);this.search.bind("keydown",this.bind(function(E){if(!this.enabled){return}if(E.which===c.BACKSPACE&&this.search.val()===""){this.close();var F,D=C.find(".select2-search-choice-focus");if(D.length>0){this.unselect(D.first());this.search.width(765);d(E);return}F=C.find(".select2-search-choice");if(F.length>0){F.last().addClass("select2-search-choice-focus")}}else{C.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")}if(this.opened()){switch(E.which){case c.UP:case c.DOWN:this.moveHighlight((E.which===c.UP)?-1:1);d(E);return;case c.ENTER:case c.TAB:this.selectHighlighted();d(E);return;case c.ESC:this.cancel(E);d(E);return}}if(E.which===c.TAB||c.isControl(E)||c.isFunctionKey(E)||E.which===c.BACKSPACE||E.which===c.ESC){return}this.open();if(E.which===c.PAGE_UP||E.which===c.PAGE_DOWN){d(E)}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(){this.container.removeClass("select2-container-active")}));this.container.delegate(B,"mousedown",this.bind(function(D){if(!this.enabled){return}this.clearPlaceholder();this.open();this.focusSearch();D.preventDefault()}));this.container.delegate(B,"focus",this.bind(function(){if(!this.enabled){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.clearSearch()},enable:function(){if(this.enabled){return}this.parent.enable.apply(this,arguments);this.search.removeAttr("disabled")},disable:function(){if(!this.enabled){return}this.parent.disable.apply(this,arguments);this.search.attr("disabled",true)},initSelection:function(){var C;if(this.opts.element.val()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var B=this;this.opts.initSelection.call(null,this.opts.element,function(D){if(D!==k&&D!==null){B.updateSelection(D);B.close();B.clearSearch()}})}},clearSearch:function(){var B=this.getPlaceholder();if(B!==k&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(B).addClass("select2-default");this.resizeSearch()}else{this.search.val(" ").width(765)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}else{if(this.search.val()===" "){this.search.val("")}}},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch()},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(E){var D=[],C=[],B=this;i(E).each(function(){if(b(B.id(this),D)<0){D.push(B.id(this));C.push(this)}});E=C;this.selection.find(".select2-search-choice").remove();i(E).each(function(){B.addSelectedChoice(this)});B.postprocessResults()},onSelect:function(B){this.addSelectedChoice(B);if(this.select){this.postprocessResults()}if(this.opts.closeOnSelect){this.close();this.search.width(765)}else{this.search.width(765);this.resizeSearch();if(this.countSelectableResults()>0){this.positionDropdown()}else{this.close()}}this.triggerChange({added:B});this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(D){var B=i("<li class='select2-search-choice'>    <div></div>    <a href='javascript:void(0)' class='select2-search-choice-close' tabindex='-1'></a></li>"),F=this.id(D),E=this.getVal(),C;C=this.opts.formatSelection(D,B);B.find("div").replaceWith("<div>"+u(C)+"</div>");B.find(".select2-search-choice-close").bind("click dblclick",this.bind(function(G){if(!this.enabled){return}i(G.target).closest(".select2-search-choice").fadeOut("fast").animate({width:"hide"},50,this.bind(function(){this.unselect(i(G.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue();d(G)})).bind("focus",this.bind(function(){if(!this.enabled){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}));B.data("select2-data",D);B.insertBefore(this.searchContainer);E.push(F);this.setVal(E)},unselect:function(C){var E=this.getVal(),D,B;C=C.closest(".select2-search-choice");if(C.length===0){throw"Invalid argument: "+C+". Must be .select2-search-choice"}D=C.data("select2-data");B=b(this.id(D),E);if(B>=0){E.splice(B,1);this.setVal(E);if(this.select){this.postprocessResults()}}C.remove();this.triggerChange({removed:D})},postprocessResults:function(){var D=this.getVal(),E=this.results.find(".select2-result-selectable"),C=this.results.find(".select2-result-with-children"),B=this;E.each2(function(G,F){var H=B.id(F.data("select2-data"));if(b(H,D)>=0){F.addClass("select2-disabled").removeClass("select2-result-selectable")}else{F.removeClass("select2-disabled").addClass("select2-result-selectable")}});C.each2(function(F,G){if(G.find(".select2-result-selectable").length==0){G.addClass("select2-disabled")}else{G.removeClass("select2-disabled")}});E.each2(function(G,F){if(!F.hasClass("select2-disabled")&&F.hasClass("select2-result-selectable")){B.highlight(0);return false}})},resizeSearch:function(){var G,E,D,B,C,F=m(this.search);G=x(this.search)+10;E=this.search.offset().left;D=this.selection.width();B=this.selection.offset().left;C=D-(E-B)-F;if(C<G){C=D-F}if(C<40){C=D-F}this.search.width(C)},getVal:function(){var B;if(this.select){B=this.select.val();return B===null?[]:B}else{B=this.opts.element.val();return l(B,this.opts.separator)}},setVal:function(C){var B;if(this.select){this.select.val(C)}else{B=[];i(C).each(function(){if(b(this,B)<0){B.push(this)}});this.opts.element.val(B.length===0?"":B.join(this.opts.separator))}},val:function(){var D,C=[],B=this;if(arguments.length===0){return this.getVal()}D=arguments[0];if(!D){this.opts.element.val("");this.updateSelection([]);this.clearSearch();return}this.setVal(D);if(this.select){this.select.find(":selected").each(function(){C.push({id:i(this).attr("value"),text:i(this).text()})});this.updateSelection(C)}else{if(this.opts.initSelection===k){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(F){var E=i(F).map(B.id);B.setVal(E);B.updateSelection(F);B.clearSearch()})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var C=[],B=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){C.push(B.opts.id(i(this).data("select2-data")))});this.setVal(C);this.triggerChange()},data:function(C){var B=this,D;if(arguments.length===0){return this.selection.find(".select2-search-choice").map(function(){return i(this).data("select2-data")}).get()}else{if(!C){C=[]}D=i.map(C,function(E){return B.opts.id(E)});this.setVal(D);this.updateSelection(C);this.clearSearch()}}});i.fn.select2=function(){var E=Array.prototype.slice.call(arguments,0),F,D,G,C,B=["val","destroy","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];this.each(function(){if(E.length===0||typeof(E[0])==="object"){F=E.length===0?{}:i.extend({},E[0]);F.element=i(this);if(F.element.get(0).tagName.toLowerCase()==="select"){C=F.element.attr("multiple")}else{C=F.multiple||false;if("tags" in F){F.multiple=C=true}}D=C?new A():new v();D.init(F)}else{if(typeof(E[0])==="string"){if(b(E[0],B)<0){throw"Unknown method: "+E[0]}G=k;D=i(this).data("select2");if(D===k){return}if(E[0]==="container"){G=D.container}else{G=D[E[0]].apply(D,E.slice(1))}if(G!==k){return false}}else{throw"Invalid arguments to select2 plugin: "+E}}});return(G===k)?this:G};i.fn.select2.defaults={width:"copy",closeOnSelect:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(B,C,E){var D=[];h(B.text,E.term,D);return D.join("")},formatSelection:function(C,B){return C.text},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(B,C){return"Please enter "+(C-B.length)+" more characters"},formatSelectionTooBig:function(B){return"You can only select "+B+" items"},formatLoadMore:function(B){return"Loading more results..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(B){return B.id},matcher:function(B,C){return C.toUpperCase().indexOf(B.toUpperCase())>=0}};window.Select2={query:{ajax:o,local:q,tags:n},util:{debounce:g,markMatch:h},"class":{"abstract":e,single:v,multi:A}}}(jQuery));