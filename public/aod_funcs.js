$(function(){$(window).scroll(function(){$html=$("html");if($html.hasClass("webkit")){var a=$("body")[0].scrollTop}else{if($html.hasClass("firefox")){var a=$("html")[0].scrollTop}else{var a=$("html")[0].scrollTop}}if(a<160){$("body").removeClass("mini")}else{$("body").addClass("mini")}});$("body").trigger("scroll")});function refinaAutocomplete(){$.ui.autocomplete.prototype._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append("<a href='/catalogo/"+b.valor+"'>"+b.label+"</a>").appendTo(a)}}function changeOrder(a){if(currentUrl){if(currentUrl.indexOf("?")!=-1){window.location=currentUrl+"&"+a}else{window.location=currentUrl+"?"+a}}}function tryToSelectItem(b,a){for(k=0;k<b.length;k++){if(b[k].value==a){b[k].selected=true}}}$(document).ready(function(){refinaAutocomplete();if(($("#cajaDeBusqInput").val()!="")){$("#cajaDeBusqInput").css("background","#FFFFFF")}$("#cajaDeBusqInput").on("blur",function(){if(($("#cajaDeBusqInput").val()!="")){$("#cajaDeBusqInput").css("background","#FFFFFF")}});var c={disable_search:true};var g="bienal";var f=function i(){var l="/catalogo";var o=$("#temaFilter")[0].selectedIndex;if(o!=0){l+="/"+$("#temaFilter")[0][o].value}var m=$("#tipoFilter")[0].selectedIndex;if(m!=0){l+="/"+$("#tipoFilter")[0][m].value}if($("#tipoFilter")[0][m].value==g){var n=$("#estadisNivel1_Filter")[0].selectedIndex;if(n!=0){l+="/"+$("#estadisNivel1_Filter")[0][n].value}}window.location=l;return false};var h=function j(){var m="/catalogo";var p=$("#temaFilter")[0].selectedIndex;if(p!=0){m+="/"+$("#temaFilter")[0][p].value}var n=$("#tipoFilter")[0].selectedIndex;if(n!=0){m+="/"+$("#tipoFilter")[0][n].value}var o=$("#estadisNivel1_Filter")[0].selectedIndex;if(o!=0){m+="/"+$("#estadisNivel1_Filter")[0][o].value;var l=$("#estadisNivel2_grp"+o+"_Filter")[0].selectedIndex;if(l!=0){m+="/"+$("#estadisNivel2_grp"+o+"_Filter")[0][l].value}}window.location=m;return false};var d=new Array();if(currentUrl){d=currentUrl.split("/");if(d.length==3){tryToSelectItem($("#temaFilter")[0],d[2]);tryToSelectItem($("#tipoFilter")[0],d[2]);var e=$("#tipoFilter")[0].selectedIndex;if($("#tipoFilter")[0][e].value==g){$("#estadisNivel1_FilterDiv").removeClass("oculto");$("#estadisNivel1_Filter").chosen(c).change(h)}}else{if(d.length==4){tryToSelectItem($("#temaFilter")[0],d[2]);var b=$("#temaFilter")[0].selectedIndex;if(b!=0){tryToSelectItem($("#tipoFilter")[0],d[3]);var e=$("#tipoFilter")[0].selectedIndex;if($("#tipoFilter")[0][e].value==g){$("#estadisNivel1_FilterDiv").removeClass("oculto");$("#estadisNivel1_Filter").chosen(c).change(h)}}tryToSelectItem($("#tipoFilter")[0],d[2]);var e=$("#tipoFilter")[0].selectedIndex;if($("#tipoFilter")[0][e].value==g){$("#estadisNivel1_FilterDiv").removeClass("oculto");tryToSelectItem($("#estadisNivel1_Filter")[0],d[3]);$("#estadisNivel1_Filter").chosen(c).change(h);var a=$("#estadisNivel1_Filter")[0].selectedIndex;if(a!=0){$("#estadisNivel2_grp"+a+"_FilterDiv").removeClass("oculto");$("#estadisNivel2_grp"+a+"_Filter").chosen(c).change(h)}}}else{if(d.length==5){tryToSelectItem($("#temaFilter")[0],d[2]);var b=$("#temaFilter")[0].selectedIndex;if(b!=0){tryToSelectItem($("#tipoFilter")[0],d[3]);var e=$("#tipoFilter")[0].selectedIndex;if($("#tipoFilter")[0][e].value==g){$("#estadisNivel1_FilterDiv").removeClass("oculto");tryToSelectItem($("#estadisNivel1_Filter")[0],d[4]);$("#estadisNivel1_Filter").chosen(c).change(h)}}tryToSelectItem($("#tipoFilter")[0],d[2]);var e=$("#tipoFilter")[0].selectedIndex;if($("#tipoFilter")[0][e].value==g){$("#estadisNivel1_FilterDiv").removeClass("oculto");tryToSelectItem($("#estadisNivel1_Filter")[0],d[3]);$("#estadisNivel1_Filter").chosen(c).change(h);var a=$("#estadisNivel1_Filter")[0].selectedIndex;if(a!=0){$("#estadisNivel2_grp"+a+"_FilterDiv").removeClass("oculto");tryToSelectItem($("#estadisNivel2_grp"+a+"_Filter")[0],d[4]);$("#estadisNivel2_grp"+a+"_Filter").chosen(c).change(h)}}}else{if(d.length==6){tryToSelectItem($("#temaFilter")[0],d[2]);var b=$("#temaFilter")[0].selectedIndex;if(b!=0){tryToSelectItem($("#tipoFilter")[0],d[3]);var e=$("#tipoFilter")[0].selectedIndex;if($("#tipoFilter")[0][e].value==g){$("#estadisNivel1_FilterDiv").removeClass("oculto");tryToSelectItem($("#estadisNivel1_Filter")[0],d[4]);$("#estadisNivel1_Filter").chosen(c).change(h);var a=$("#estadisNivel1_Filter")[0].selectedIndex;if(a!=0){$("#estadisNivel2_grp"+a+"_FilterDiv").removeClass("oculto");tryToSelectItem($("#estadisNivel2_grp"+a+"_Filter")[0],d[5]);$("#estadisNivel2_grp"+a+"_Filter").chosen(c).change(h)}}}}}}}}$("#temaFilter").chosen(c).change(f);$("#tipoFilter").chosen(c).change(f);$("#cajaDeBusqInput").autocomplete({source:function(m,l){$.ajax({url:"/catalogo/api/2/util/dataset/autocomplete?incomplete=%"+$("#cajaDeBusqInput").val()+"%",dataType:"jsonp",success:function(n){l($.map(n.ResultSet.Result,function(o){return{label:o.title,valor:o.name,value:o.title}}))}})},minLength:1,open:function(l,m){$(this).autocomplete("widget").css({width:425})},select:function(m,l){$("#cajaBusqBanner").attr("action","/catalogo/"+l.item.valor);$("#cajaDeBusqInput").val("");$("#cajaBusqBanner").submit()}});$.ajax({url:"/catalogo/api/mostDownloadedDataset",dataType:"jsonp",success:function(n){var m="";for(var l=0;l<3;l++){m+='<div><a href="/catalogo/'+(n[l].name)+'" title="'+(n[l].title)+'">'+(n[l].title)+"</a></div>";if(l!=2){m+='<div class="separadorVentana"></div>'}}$("#zonaVentanaDatosDescargados1").html(m)}});$.ajax({url:"/catalogo/api/mostRecentDataset",dataType:"jsonp",success:function(n){var m="";for(var l=0;l<3;l++){m+='<div><a href="/catalogo/'+(n[l].name)+'" title="'+(n[l].title)+'">'+(n[l].title)+"</a></div>";if(l!=2){m+='<div class="separadorVentana"></div>'}}$("#zonaVentanaDatosRecientes1").html(m)}});$.ajax({url:"/catalogo/api/getDataCount",dataType:"jsonp",success:function(n){var l=getContadorHTML(n[0].datasetCount);var m=getContadorHTML(n[0].resourceCount);$("#numDatasets").html(l);$("#numRecursos").html(m)},error:function(n){var l=getContadorHTML(448);var m=getContadorHTML(1049);$("#numDatasets").html(l);$("#numRecursos").html(m)}})});function getContadorDigit(a){var b="";if((a>=0)&&(a<=9)){b='<img src="/public/i/contador/'+a+'.png" alt="'+a+'">'}return b}function getContadorHTML(d){var e="";var c=0;var a=d;while(a>9){e=getContadorDigit(a%10)+e;a=Math.floor(a/10);c++}e=getContadorDigit(a)+e;c++;for(var b=c;b<8;b++){e='<img src="/public/i/contador/0_off.png" alt="0">'+e}return e};