var txtHomer="*";var langHomer="es";var startHomer=0;var rowsHomer=20;var sortHomer="portal";var sortTypeHomer="asc";function parseInitialHomerParams(){var e=window.location.toString();var c=new Array();var b=new Array();c=e.split("?");if(c.length>1){b=c[1].split("&");for(var a=0;a<b.length;a++){var d=b[a].split("=");switch(d[0]){case"txtHOMER":(d[1]?txtHomer=decodeURI(decodeURI(d[1])).replace(/\+/g," "):j=0);break;case"langHOMERFilter":(d[1]?langHomer=d[1]:j=0);break;case"startHOMER":(d[1]?startHomer=d[1]:j=0);break;case"rowsHOMER":(d[1]?rowsHomer=d[1]:j=0);break;case"sortHOMER":(d[1]?sortHomer=d[1]:j=0);break;case"sortTypeHOMER":(d[1]?sortTypeHomer=d[1]:j=0);break}}}}function getPaginationHomer(a){var h="";var d="/catalogo/searchHOMER?txtHOMER="+txtHomer+"&langHOMERFilter="+langHomer;d+="&sortHOMER="+sortHomer+"&sortTypeHOMER="+sortTypeHomer+"&startHOMER=";var e=Math.floor(startHomer/rowsHomer)+1;var g=Math.ceil(a/rowsHomer);if(g>1){var c=Math.max(1,e-2);var b=Math.min(g,e+2);h+='<div class="pagination pagination-centered"><ul>';if(e>1){h+='<li><a href="'+d+((e-2)*rowsHomer)+'">«</a></li>'}if(c==2){h+='<li><a href="'+d+'0">1</a></li>'}if(c>=3){h+='<li><a href="'+d+'0">1</a></li>';h+='<li class="disabled"><a href="#">...</a></li>'}for(var f=c;f<=b;f++){h+="<li";if(f==e){h+=' class="active"'}h+='><a href="'+d+((f-1)*rowsHomer)+'">'+f+"</a></li>"}if(b==g-1){h+='<li><a href="'+d+((g-1)*rowsHomer)+'">'+g+"</a></li>"}if(b<g-1){h+='<li class="disabled"><a href="#">...</a></li>';h+='<li><a href="'+d+((g-1)*rowsHomer)+'">'+g+"</a></li>"}if(e<g){h+='<li><a href="'+d+((e)*rowsHomer)+'">»</a></li>'}h+="</ul></div>"}return h}function changeOrderHomer(c,b){var a="/catalogo/searchHOMER?txtHOMER="+txtHomer+"&langHOMERFilter="+langHomer;a+="&sortHOMER="+c+"&sortTypeHOMER="+b+"&startHOMER="+startHomer;window.location=a}function getOrderButtonsHTML(b){var d="";var a=false;var c=false;if(b==sortHomer){if(sortTypeHomer=="asc"){a=true}else{if(sortTypeHomer=="desc"){c=true}}}d+='<ul class="d_d">';d+="	<li><a href=\"javascript:changeOrderHomer('"+b+"','asc')\"  title=\"Orden ascendente\">";if(a){d+='			<img src="/public/i/buscaDatos/flechaBlancaUp.png" alt="Orden ascendente">'}else{d+='			<img src="/public/i/buscaDatos/flechaAzulUp.png" alt="Orden ascendente">'}d+="	</a></li>";d+="	<li><a href=\"javascript:changeOrderHomer('"+b+"','desc')\"  title=\"Orden descendente\">";if(c){d+='			<img src="/public/i/buscaDatos/flechaBlancaDown.png" alt="Orden descendente">'}else{d+='			<img src="/public/i/buscaDatos/flechaAzulDown.png" alt="Orden descendente">'}d+="	 </a></li>";d+="</ul>";return d}function doQueryHomer(){parseInitialHomerParams();if(txtHomer!="*"){$("#txtHOMER").val(txtHomer)}tryToSelectItem($("#langHOMERFilter")[0],langHomer);$("#langHOMERFilter").trigger("chosen:updated");changeHomerLabels(langHomer);var b="*";if(txtHomer!="*"){b=txtHomer+"&lang="+langHomer}var a="/proxyHomer?q="+b+"&sort="+sortHomer+"%20"+sortTypeHomer;a+="&start="+startHomer+"&rows="+rowsHomer+"&wt=xml";$.ajax({url:a,dataType:"xml",success:function(d){var c="";var e=$(d).find("result").attr("numFound");if(e<1){c="No se encontraron resultados en HOMER"}else{if(e>1){tituloHTML="Encontrados "+e+" resultados en HOMER"}else{tituloHTML="Encontrado "+e+" resultado en HOMER"}c+="<table class='tablaResultadosDataset'>";c+="<tr>";c+="<th class='cabeceraTablaResultadosDataset'>";c+="<div class='labelCabeceraTablaResultadosHomer'>"+tituloHTML;c+=getOrderButtonsHTML("title")+"</div></th>";c+="<th class='cabeceraTablaResultadosDataset centrado tamPocoEstrecho'>";c+="<div class='labelCabeceraTablaResultadosHomer'>Portal";c+=getOrderButtonsHTML("portal")+"</div></th>";c+="<th class='cabeceraTablaResultadosDataset centrado tamMuyEstrecho'>";c+="<div class='labelCabeceraTablaResultadosHomer'>Idioma";c+=getOrderButtonsHTML("language")+"</div></th>";c+="</tr>";$(d).find("doc").each(function(){var h="-";var g="-";var f="";var i="-";$(this).find("str").each(function(){if($(this).attr("name")=="title"){title=$(this).text()}if($(this).attr("name")=="package_id"){f="/catalogo/detallesHOMER/"+$(this).text()}if($(this).attr("name")=="portal"){g=$(this).text()}if($(this).attr("name")=="language"){i=$(this).text()}});c+="<tr>";if(f!=""){c+="<td class='izquierda'><a href='"+f+"' title='"+title+"'>"+title+"</a></td>"}else{c+="<td class='izquierda'>"+title+"</td>"}c+="<td>"+g+"</td>";c+="<td>"+i+"</td>";c+="</tr>"});c+="</table>"}c+=getPaginationHomer(e);$("#homerResults").html(c)},error:function(c,e,d){$("#homerResults").html("No se ha podido obtener los resultados de HOMER")}})};